new Vue({el:"#app",data:{calcLoading:!1,config:{chronoEraStep:88},form:{cicle:88,min:1,max:3333,etherium:null,timeMint:null,chronoPower:null,tokensDayZero:null,etheriumAddress:null},chronoEra:{},page:1,pagination:50,url:"https://etherchain.org/api/account/0xA723606e907bF84215d5785Ea7f6cD93A0Fbd121/tx/",transactions:[],transactionsAgrouped:{},startDate1:"2017-08-28T13:00:00.000Z",startDate2:"2017-08-28T19:00:00.000Z",amountStartDate:5},mounted:function(){var t=this,o={};for(i=1;i<=40;i++)o[i]={era:Math.ceil(i/4),initDay:t.config.chronoEraStep*i-t.config.chronoEraStep+1,lastDay:t.config.chronoEraStep*i,effective:1==i?1:o[i-1].effective/2};t.chronoEra=o,t.getPositionsTransaction()},methods:{getAddress:function(){if(this.transactionsAgrouped[this.form.etheriumAddress]){var t=0,o=this.transactionsAgrouped[this.form.etheriumAddress];for(i=0;i<o.length;i++)t+=o[i].amountFormated;this.form.etherium=String(t),this.form.timeMint=Object.keys(this.transactionsAgrouped).indexOf(this.form.etheriumAddress)+1}else this.form.etheriumAddress&&alert("NÃ£o foi encontrado")},getTransactions:function(t){var i=this,o=i.url,r=i.pagination*t-i.pagination;this.$http.get(o+r).then(function(o){o.body.data.length?(i.transactions=i.transactions.concat(o.body.data),setTimeout(function(){i.getTransactions(t+1)},1e4)):console.log(i.transactions)},function(t){})},getPositionsTransaction:function(){for(var t=this,i=transactions,o={},r=0;r<i.length;r++){var e=!1,n=i[r];n.amountFormated=n.amount/1e18,moment(n.time).isSameOrAfter(t.startDate1)&&n.amountFormated>=5&&(e=!0),!e&&moment(n.time).isSameOrAfter(t.startDate2)&&n.amountFormated>=1?e=!0:void 0!==o[n.sender]&&(e=!0),e&&(void 0===o[n.sender]&&(o[n.sender]=Array()),o[n.sender].push(n))}t.transactionsAgrouped=o}},watch:{"form.etherium":function(t){var i=Number(t.replace(",","."));if(i){var o=24*i;this.form.tokensDayZero=o}},"form.timeMint":function(t){var i=this;if(Number(t)<this.form.min)return void i.$nextTick(function(){this.form.timeMint=this.form.min});if(Number(t)>this.form.max)return void i.$nextTick(function(){this.form.timeMint=this.form.max});var o=Number(t);if(o){var r=.01-.005*(o-1)/3332;this.form.chronoPower=String(100*r)}}},computed:{simulations:function(){var t=[],i=this;if(i.form.timeMint&&i.form.chronoPower){i.calcLoading=!0;var o=i.form.tokensDayZero;for(item in i.chronoEra){var r=i.chronoEra[item],e=o;item>1&&(void 0!==r[item-2]&&(o+=r[item-2].diff),e=t[item-2].last);var n=r.effective,a=this.form.chronoPower,s=n*a,m=Math.pow(1+s/100,i.config.chronoEraStep),c=e*m;t.push({period:item,start:e,chronoPower:s,last:c,diff:c-e})}}return i.calcLoading=!1,t}}});