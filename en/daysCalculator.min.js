new Vue({el:"#app",data:{calcLoading:!1,config:{chronoEraStep:88},form:{cicle:88,min:1,max:3333,etherium:null,timeMint:null,chronoPower:null,tokensDayZero:null,etheriumAddress:null},chronoEra:{},page:1,pagination:50,url:"https://etherchain.org/api/account/0xA723606e907bF84215d5785Ea7f6cD93A0Fbd121/tx/",transactions:[],transactionsAgrouped:{},startDate1:"2017-08-28T13:00:00.000Z",startDate2:"2017-08-28T19:00:00.000Z",amountStartDate:5},mounted:function(){var t=this,o={};for(i=1;i<=40;i++)o[i]={era:Math.ceil(i/4),initDay:t.config.chronoEraStep*i-t.config.chronoEraStep+1,lastDay:t.config.chronoEraStep*i,effective:1==i?1:o[i-1].effective/2};t.chronoEra=o,t.getPositionsTransaction()},methods:{getAddress:function(){if(this.transactionsAgrouped[this.form.etheriumAddress]){var t=0,o=this.transactionsAgrouped[this.form.etheriumAddress];for(i=0;i<o.length;i++)t+=o[i].amountFormated;this.form.etherium=String(t),this.form.timeMint=Object.keys(this.transactionsAgrouped).indexOf(this.form.etheriumAddress)+1}else this.form.etheriumAddress&&(swal("Oops..",msgAlert,"error").catch(swal.noop),this.form.etheriumAddress=null)},getTransactions:function(t){var o=this,r=o.url,e=o.pagination*t-o.pagination;this.$http.get(r+e).then(function(r){r.body.data.length?(o.transactions=o.transactions.concat(r.body.data),setTimeout(function(){o.getTransactions(t+1)},1e4)):console.log(o.transactions)},function(t){})},getPositionsTransaction:function(){for(var t=this,o=transactions,r={},e=0;e<o.length;e++){var i=!1,n=o[e];n.amountFormated=n.amount/1e18,moment(n.time).isSameOrAfter(t.startDate1)&&n.amountFormated>=5&&(i=!0),!i&&moment(n.time).isSameOrAfter(t.startDate2)&&n.amountFormated>=1?i=!0:void 0!==r[n.sender]&&(i=!0),i&&(void 0===r[n.sender]&&(r[n.sender]=Array()),r[n.sender].push(n))}t.transactionsAgrouped=r},formEtherium:function(t){var o=Number(String(t).replace(",","."));if(o)if(o<1)swal("Oops",msgAlert2,"error").catch(swal.noop),this.form.etherium=null,this.form.chronoPower=null,this.form.tokensDayZero=null;else{var r=24*o;this.form.tokensDayZero=r}else this.form.etherium=null,this.form.chronoPower=null,this.form.tokensDayZero=null}},watch:{"form.timeMint":function(t){var o=this;if(Number(t)<this.form.min)o.$nextTick(function(){this.form.timeMint=this.form.min});else if(Number(t)>this.form.max)o.$nextTick(function(){this.form.timeMint=this.form.max});else{var r=Number(t);if(r){var e=.01-.005*(r-1)/3332;this.form.chronoPower=String(100*e)}}}},computed:{simulations:function(){var t=[],o=this;if(o.form.timeMint&&o.form.chronoPower){o.calcLoading=!0;var r=o.form.tokensDayZero;for(item in o.chronoEra){var e=o.chronoEra[item],i=r;item>1&&(void 0!==e[item-2]&&(r+=e[item-2].diff),i=t[item-2].last);var n=e.effective*this.form.chronoPower,a=i*Math.pow(1+n/100,o.config.chronoEraStep);t.push({chronoPower:n,period:item,start:Number(i),last:a,diff:a-i})}}return o.calcLoading=!1,t}}});